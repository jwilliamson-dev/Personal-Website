name: Release
on:
  release:
    types: [published]

jobs:
  publish:
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ”½ Download artifact
        uses: actions/download-artifact@v4
        with:
          name: production-files

      - name: ðŸ”‘ Azure login
        uses: azure/login@v2
        with:
          creds: ${{ secrets.AZURE_CREDENTIALS }}

      - name: ðŸ”¼ Upload to Azure blob storage
        uses: azure/CLI@v2
        with:
          azcliversion: latest
          inlineScript: |
            az storage blob upload-batch --account-name jwilliamsondev -d '$web' -s ./production-files

      - name: ðŸ”’ Azure logout
        run: |
          az logout
